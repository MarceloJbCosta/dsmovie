{"ast":null,"code":"import _slicedToArray from\"/Users/macbook/projetos/dsmovie/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./styles.css';import{Link,useNavigate}from'react-router-dom';import{useEffect,useState}from'react';import axios from'axios';import{BASE_URL}from'utils/requests';import{validateEmail}from'utils/validate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FormCard(_ref){var movieId=_ref.movieId;var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];useEffect(function(){axios.get(\"\".concat(BASE_URL,\"/movies/\").concat(movieId)).then(function(response){setMovie(response.data);});},[movieId]);var handleSubmit=function handleSubmit(event){event.preventDefault();var email=event.target.email.value;var score=event.target.score.value;if(!validateEmail(email)){return;}var config={baseURL:BASE_URL,method:'PUT',url:'/scores',data:{email:email,movieId:movieId,score:score}};axios(config).then(function(reponse){navigate(\"/\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"dsmovie-form-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"dsmovie-movie-card-image\",src:movie===null||movie===void 0?void 0:movie.image,alt:movie===null||movie===void 0?void 0:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"dsmovie-card-bottom-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:movie===null||movie===void 0?void 0:movie.title}),/*#__PURE__*/_jsxs(\"form\",{className:\"dsmovie-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group dsmovie-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Informe seu email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group dsmovie-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"score\",children:\"Informe sua avalia\\xE7\\xE3o\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",id:\"score\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{children:\"4\"}),/*#__PURE__*/_jsx(\"option\",{children:\"5\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dsmovie-form-btn-container\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary dsmovie-btn\",children:\"Salvar\"})})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary dsmovie-btn mt-3\",children:\"Cancelar\"})})]})]});}export default FormCard;","map":{"version":3,"sources":["/Users/macbook/projetos/dsmovie/frontend/src/components/formCard/index.tsx"],"names":["Link","useNavigate","useEffect","useState","axios","BASE_URL","validateEmail","FormCard","movieId","navigate","movie","setMovie","get","then","response","data","handleSubmit","event","preventDefault","email","target","value","score","config","baseURL","method","url","reponse","image","title"],"mappings":"8HAAA,MAAO,cAAP,CACA,OAASA,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CAEA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAA0C,OAA1C,CACA,OAASC,QAAT,KAAyB,gBAAzB,CACA,OAASC,aAAT,KAA8B,gBAA9B,C,wFAMA,QAASC,CAAAA,QAAT,MAAsC,IAAlBC,CAAAA,OAAkB,MAAlBA,OAAkB,CAElC,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,cAA0BE,QAAQ,EAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACAT,SAAS,CAAC,UAAM,CACZE,KAAK,CAACQ,GAAN,WAAaP,QAAb,oBAAgCG,OAAhC,GACKK,IADL,CACU,SAAAC,QAAQ,CAAI,CACdH,QAAQ,CAACG,QAAQ,CAACC,IAAV,CAAR,CACH,CAHL,EAIH,CALQ,CAKN,CAACP,OAAD,CALM,CAAT,CAOA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAA6C,CAE9DA,KAAK,CAACC,cAAN,GAEA,GAAMC,CAAAA,KAAK,CAAIF,KAAK,CAACG,MAAP,CAAsBD,KAAtB,CAA4BE,KAA1C,CAEA,GAAMC,CAAAA,KAAK,CAAIL,KAAK,CAACG,MAAP,CAAsBE,KAAtB,CAA4BD,KAA1C,CAEA,GAAG,CAACf,aAAa,CAACa,KAAD,CAAjB,CAAyB,CACrB,OACH,CACD,GAAMI,CAAAA,MAA0B,CAAG,CAC/BC,OAAO,CAAEnB,QADsB,CAE/BoB,MAAM,CAAE,KAFuB,CAG/BC,GAAG,CAAE,SAH0B,CAI/BX,IAAI,CAAE,CACFI,KAAK,CAAEA,KADL,CAEFX,OAAO,CAAEA,OAFP,CAGFc,KAAK,CAAEA,KAHL,CAJyB,CAAnC,CAUAlB,KAAK,CAACmB,MAAD,CAAL,CAAcV,IAAd,CAAmB,SAAAc,OAAO,CAAI,CAC1BlB,QAAQ,CAAC,GAAD,CAAR,CACH,CAFD,EAKH,CA1BD,CA6BA,mBACI,aAAK,SAAS,CAAC,wBAAf,wBACI,YAAK,SAAS,CAAC,0BAAf,CAA0C,GAAG,CAAEC,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEkB,KAAtD,CAA6D,GAAG,CAAElB,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEmB,KAAzE,EADJ,cAEI,aAAK,SAAS,CAAC,+BAAf,wBACI,oBAAKnB,KAAL,SAAKA,KAAL,iBAAKA,KAAK,CAAEmB,KAAZ,EADJ,cAEI,cAAM,SAAS,CAAC,cAAhB,CAA+B,QAAQ,CAAEb,YAAzC,wBACI,aAAK,SAAS,CAAC,+BAAf,wBACI,cAAO,OAAO,CAAC,OAAf,+BADJ,cAEI,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,OAAhD,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,+BAAf,wBACI,cAAO,OAAO,CAAC,OAAf,yCADJ,cAEI,gBAAQ,SAAS,CAAC,cAAlB,CAAiC,EAAE,CAAC,OAApC,wBACI,6BADJ,cAEI,6BAFJ,cAGI,6BAHJ,cAII,6BAJJ,cAKI,6BALJ,GAFJ,GALJ,cAeI,YAAK,SAAS,CAAC,4BAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,6BAAhC,oBADJ,EAfJ,GAFJ,cAqBI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACI,eAAQ,SAAS,CAAC,kCAAlB,sBADJ,EArBJ,GAFJ,GADJ,CA+BH,CAED,cAAeT,CAAAA,QAAf","sourcesContent":["import './styles.css'\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Movie } from 'types/movie';\nimport { useEffect, useState } from 'react';\nimport axios, { AxiosRequestConfig } from 'axios';\nimport { BASE_URL } from 'utils/requests';\nimport { validateEmail } from 'utils/validate';\n\ntype Props = {\n    movieId: string;\n}\n\nfunction FormCard({ movieId }: Props) {\n\n    const navigate = useNavigate();\n\n    const [movie, setMovie] = useState<Movie>();\n    useEffect(() => {\n        axios.get(`${BASE_URL}/movies/${movieId}`)\n            .then(response => {\n                setMovie(response.data)\n            });\n    }, [movieId]);\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n\n        event.preventDefault();\n\n        const email = (event.target as any).email.value;\n\n        const score = (event.target as any).score.value;\n\n        if(!validateEmail(email)){\n            return;\n        }\n        const config: AxiosRequestConfig = {\n            baseURL: BASE_URL,\n            method: 'PUT',\n            url: '/scores',\n            data: {\n                email: email,\n                movieId: movieId,\n                score: score\n            }\n        }\n        axios(config).then(reponse => {\n            navigate(\"/\");\n        })\n\n\n    }\n\n\n    return (\n        <div className=\"dsmovie-form-container\">\n            <img className=\"dsmovie-movie-card-image\" src={movie?.image} alt={movie?.title} />\n            <div className=\"dsmovie-card-bottom-container\">\n                <h3>{movie?.title}</h3>\n                <form className=\"dsmovie-form\" onSubmit={handleSubmit}>\n                    <div className=\"form-group dsmovie-form-group\">\n                        <label htmlFor=\"email\">Informe seu email</label>\n                        <input type=\"email\" className=\"form-control\" id=\"email\" />\n                    </div>\n                    <div className=\"form-group dsmovie-form-group\">\n                        <label htmlFor=\"score\">Informe sua avaliação</label>\n                        <select className=\"form-control\" id=\"score\">\n                            <option>1</option>\n                            <option>2</option>\n                            <option>3</option>\n                            <option>4</option>\n                            <option>5</option>\n                        </select>\n                    </div>\n                    <div className=\"dsmovie-form-btn-container\">\n                        <button type=\"submit\" className=\"btn btn-primary dsmovie-btn\">Salvar</button>\n                    </div>\n                </form >\n                <Link to=\"/\">\n                    <button className=\"btn btn-primary dsmovie-btn mt-3\">Cancelar</button>\n                </Link>\n\n            </div >\n        </div >\n    )\n}\n\nexport default FormCard;"]},"metadata":{},"sourceType":"module"}